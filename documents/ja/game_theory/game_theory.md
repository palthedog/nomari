# ゲーム理論と起き攻め

## 格闘ゲームは「高速じゃんけん」

格闘ゲーマーの間では、格闘ゲームを「高速じゃんけん」と表現することがあります。これは単なる比喩ではなく、ゲーム理論的に見ても本質を突いた表現です。

世の中には色々なゲームがあるけれど、なぜじゃんけんなのでしょうか？　将棋やオセロとは違うのでしょうか？
細かい説明を抜きにすると、将棋やチェスのようなお互い交互に**行動する**ゲームでは「この状況では**必ず**この行動をするのが最強！」という行動が存在することが分かっています。「初期局面では必ず飛車の前の歩を動かすのが最強」みたいなものです（まだ将棋は解明されていませんが）

### じゃんけんの最適戦略
2人で遊ぶじゃんけんについて考えてみましょう。昔、必勝法について考えたことがある人も多いかと思います。
みなさん色々な結論にたどりついたかとは思いますが、ゲーム理論的な最適戦略は「グー・チョキ・パーをそれぞれ1/3ずつ出すこと」です。なぜなら：
- 自分がランダムな手を出している限り、勝率は50%
- もしグーを多く出す癖があると、相手はパーを多く出すことで勝率が上がる
- 自分の戦略が相手にバレてしまったとしても、相手はその情報を利用して有利に立つことができない
- 言い換えると**「戦略がバレても確率的には絶対負けない戦略」**とも言えます
    - 消極的に聞こえるかもしれませんが、これは強力な性質です。相手がどんな天才でも、あなたの行動パターンを完璧に把握していても、勝率の期待値が50%を下回ることはないのです

---

将棋では同じ条件なら同じ手を常に指しておけばよかったのに、じゃんけんでは**確率的に**手を選ぶのが最適なようです。

これはじゃんけんが、2人のプレイヤーが**同時に手を選ぶ**ことからきています（詳細は省きます）。
格闘ゲームの起き攻め状況も、見てから反応できない短い時間の間に、攻めの手段と守りの手段をそれぞれが選ぶ必要があります。これは実質的に**同時に手を選んでいる**と考えることができ、じゃんけん的な戦略が起き攻めでの行動選択にも求められることを示しています。

### 格闘ゲームとじゃんけんの違い

通常のじゃんけんは、グーで勝っても「1勝」パーで勝っても「1勝」です。
しかし、格闘ゲームの「じゃんけん」は普通のじゃんけんとは大きく異なる点があります。

- こちらの**投げが通れば1200ダメージ**だが、**打撃が通れば3000ダメージ**
    - 同じ読み勝った状況でも**行動によって得られる報酬（ダメージ）が異なる**
- 相手の**無敵暴れが成功すれば反撃で1000ダメージ**だが、**読まれればフルコンボで4000ダメージ**
    - 同じ行動を取って読み勝った時のダメージと、読み負けた時に受けるダメージに差がある

これは一般的なじゃんけんよりも「グリコじゃんけん」に近い構造です。

### グリコじゃんけん

グリコじゃんけんでは：
- グーで勝つと「グ・リ・コ」で3点
- チョキで勝つと「チョ・コ・レ・イ・ト」で5点
- パーで勝つと「パ・イ・ナ・ツ・プ・ル」で6点

勝った手によって進める歩数が違うため、最適な比率も1/3ずつではなくなります。こちらとしてはなるべくグー以外の手で勝ちたいです。
しかしパーで勝つのが一番得だからといってパーばかり出していると、それを読んだ相手がチョキを出すことでこちらが負けてしまいます。
格闘ゲームの読み合いも、まさにこの構造を持っています。

---

## ゲーム理論の基礎概念

### 戦略的状況とは

ゲーム理論が扱うのは「**戦略的状況**」です。これは、自分の結果が自分の行動だけでなく、相手の行動にも依存する状況を指します。

起き攻めはまさにこの戦略的状況です：
- 攻め側が投げを選び、守り側がガードを選べば → 投げが成功
- 攻め側が投げを選び、守り側が暴れを選べば → 暴れで投げを潰される

### ゲームの3要素

ゲーム理論で状況を分析するには、以下の3つを明確にします：

1. **プレイヤー**: 意思決定を行う主体（攻め側と守り側）
2. **行動（戦略）**: 各プレイヤーが選べる選択肢（打撃、投げ、ガード、暴れなど）
3. **利得（報酬）**: 行動の組み合わせに対して各プレイヤーが得る報酬（ダメージ、勝率の変化など）

### 利得行列

これらを表にまとめたものが**利得行列**です。以下は簡略化した起き攻めの例です：

|              | 守り側: ガード | 守り側: 暴れ |
|--------------|---------------|-------------|
| **攻め側: 打撃** | 0 / 0    | 4000 / -4000 |
| **攻め側: 投げ** | 1200 / -1200  | -1000 / 1000 |

表の読み方：
- 各セルは「攻め側の利得 / 守り側の利得」を表す
- 攻め側が打撃、守り側がガードなら → 攻め側0、守り側0
- 攻め側が打撃、守り側が暴れなら → 攻め側+4000、守り側-4000（カウンターヒットからフルコンボ）
- 攻め側が投げ、守り側がガードなら → 攻め側+1200、守り側-1200（投げ成功）
- 攻め側が投げ、守り側が暴れなら → 攻め側-1000、守り側+1000（暴れ成功）

---

## なぜ「最適な行動」が一つに決まらないのか

上の利得行列を見ると、どちらの行動が良いかは**相手の行動に依存**していることがわかります。

- 相手がガードするなら → 投げが良い（1200 > 0）
- 相手が暴れるなら → 打撃が良い（4000 > -1000）

しかし、相手も同じように考えています：

- 相手が打撃を出すなら → ガードが良い（0 > -4000）
- 相手が投げを出すなら → 暴れが良い（1000 > -1200）

このように、お互いの最適行動が相手の行動に依存して循環する状況では同じ「最強の行動」を常に選択しているだけでは、それに相手が対応することで不利を被ってしまうことがあります。
では、相手の行動を先読みして、それに勝てる行動を選んでいく必要があるのでしょうか？
相手より読みが上手くないと勝てないのでしょうか？ 読み合いに自信がない場合、常に不利を受け入れるしかない？ 実は、そうではありません。

---

## ナッシュ均衡とは

**ナッシュ均衡**とは、「お互いに自分だけ行動を変えても得しない状態」のことです。

もし攻め側が「100%打撃」を選ぶとわかれば、守り側は「100%ガード」を選びます。すると攻め側は「100%投げ」に変えたくなり…という具合に、どちらかが「100%この行動」と決めると、相手に読まれて損をします。

### 混合戦略

では、どうすれば「相手に読まれても損しない」状態になるでしょうか？

答えは**混合戦略**です。つまり、複数の行動を**特定の確率で混ぜて**選ぶことです。
これはじゃんけんの例の時に出てきた「グーを1/3、 チョキを1/3、パーを1/3出す」ような戦略のことです。

では、具体的にどのような比率で混ぜればよいのでしょうか？ 実際に計算してみましょう。

---

## 起き攻めへの応用: 最適比率の計算

### 設定

先ほどの利得行列を使って、最適な混合比率を計算してみましょう。

|              | 守り側: ガード | 守り側: 暴れ |
|--------------|---------------|-------------|
| **攻め側: 打撃** | 0             | 4000        |
| **攻め側: 投げ** | 1200          | -1000       |

（簡略化のため、攻め側の利得のみを記載）

### 守り側の最適比率を求める

守り側がガードを確率 q、暴れを確率 (1-q) で選ぶとします。

攻め側が打撃を選んだときの期待値：

$$E(\text{打撃}) = 0 \times q + 4000 \times (1-q) = 4000 - 4000q$$

攻め側が投げを選んだときの期待値：

$$E(\text{投げ}) = 1200 \times q + (-1000) \times (1-q) = 2200q - 1000$$

攻め側が打撃を選んでも投げを選んでも、守り側の期待値が同じになるということは $E(\text{打撃}) = E(\text{投げ})$ なので：

$$E(\text{打撃}) = E(\text{投げ})$$
$$4000 - 4000q = 2200q - 1000$$
$$5000 = 6200q$$
$$q = \frac{5000}{6200} \approx 0.806$$
つまり、**守り側は約81%でガード、約19%で暴れ**を選ぶと、攻め側の選択に関わらず一定のダメージに抑えることができます。

検証として、$q = \frac{5000}{6200}$ を代入して期待値を計算すると：

$$E(\text{打撃}) = 4000 - 4000 \times \frac{5000}{6200} = 4000 \times \frac{1200}{6200} \approx 774.19$$

$$E(\text{投げ}) = 2200 \times \frac{5000}{6200} - 1000 = \frac{11000000}{6200} - 1000 \approx 774.19$$

両方とも同じ期待値（約774）になっていることが確認できます。

### 攻め側の最適比率を求める

同様に、攻め側が打撃を確率 p、投げを確率 (1-p) で選ぶとします。

守り側がガードを選んだときの期待値（守り側視点、損失を最小化）：

$$E(\text{ガード}) = 0 \times p + (-1200) \times (1-p) = -1200 + 1200p$$

守り側が暴れを選んだときの期待値：

$$E(\text{暴れ}) = -4000 \times p + 1000 \times (1-p) = 1000 - 5000p$$

$E(\text{ガード}) = E(\text{暴れ})$ の戦略は：

$$E(\text{ガード}) = E(\text{暴れ})$$
$$-1200 + 1200p = 1000 - 5000p$$
$$6200p = 2200$$
$$p = \frac{2200}{6200} \approx 0.355$$
つまり、**攻め側は約35%で打撃、約65%で投げ**を選ぶことで、相手の戦略に関係なく同じ期待値を得ることができます。

### 結果のまとめ

| プレイヤー | 行動   | 最適確率 | 期待値 |
|-----------|--------|----------|--------|
| 攻め側    | 打撃   | 約35%    | 約775  |
| 攻め側    | 投げ   | 約65%    | 約775  |
| 守り側    | ガード | 約81%    | 約-775 |
| 守り側    | 暴れ   | 約19%    | 約-775 |

期待値が等しくなっていることに注目してください。これがナッシュ均衡の特徴です。

### なぜこの比率なのか

計算を振り返ると、重要なことに気づきます。均衡を求める際に **E(打撃) = E(投げ)** という条件を使いました。
これは初めに説明をした 「**ナッシュ均衡**とは、お互いに自分だけ行動を変えても得しない状態」を表します。
なぜこの状態が「均衡」なのでしょうか？ 自分が戦略を変えた時に何が起こるか、具体例で見てみましょう。

#### 自分が戦略を変えた場合

攻め側が均衡比率（35%打撃、65%投げ）から外れて、例えば「50%打撃、50%投げ」に変えたとします。

この時、守り側の各行動の期待値を再計算してみましょう：

$$E(\text{ガード}) = -1200 + 1200 \times 0.5 = -600$$
$$E(\text{暴れ}) = 1000 - 5000 \times 0.5 = -1500$$

つまり、守り側はガードを選択することで、均衡戦略の時の-775より高い行動の期待値を得ることができます。

実際の状況では、相手は自分の戦略の変更を即座に知ることはできませんし、その内容を正確に知ることもできません。しかし、相手は「最適な比率より打撃が多い気がする」という観察から、「ガードを増やしてみよう」という読みを入れるかもしれません。

この読みが正しかった場合、守り側はガードを多く選ぶことで、攻め側の期待値を下げることができます。

#### 結論

このように、**自分が均衡から外れた戦略を取ると、相手の各行動の期待値が変わり、相手が「読み」を入れた時にその読みが正しかった場合のリターンが大きくなります**。結果として、自分は均衡戦略を取っていた時よりも損をすることになります。

逆に言えば、**均衡戦略を取っていれば、相手の読みが鋭くても、自分が損しない（期待値が変わらない）ことが保証されます**。これが、ナッシュ均衡が「お互いに自分だけ行動を変えても得しない状態」である理由であり、最初に説明した「戦略がバレても確率的には絶対負けない戦略」という性質の数学的な裏付けです。

---

## ダメージ差が比率を決める

### 重要な洞察

これまでの計算から、興味深いことがわかります：

**リターンが大きい行動ほど、相手はその行動に対応する選択肢を多く選ぶ**

- 打撃のリターン（4000）は投げのリターン（1200）より大きい
- → 守り側はガード（打撃への対応）を多く選ぶ（81%）

**リスクが大きい行動ほど、自分はその行動を少なく選ぶ**

- 打撃は暴れに勝てば4000だが、ガードされると0
- 投げは1200取れるが、暴れに負けると-1000
- → 打撃のリスク/リターン比を考慮し、攻め側は投げを多めに選ぶ（65%）

### 実践への示唆

この分析から得られる実践的な知見：

1. **高ダメージ技を持つほど有利**: 打撃のダメージが上がれば、相手はさらにガードを増やさざるを得ず、投げの成功率が相対的に上がります。

2. **「読まれても良い」比率が存在する**: ナッシュ均衡の比率で行動すれば、相手にどんな行動を読まれても、期待値は変わりません。

3. **相手の比率が偏っていれば搾取できる**: 相手がナッシュ均衡から外れた比率で行動しているなら、その偏りを突くことで期待値を上げられます。

---

## まとめ: 読み合いの本質

格闘ゲームの読み合いは、ゲーム理論における**混合戦略のナッシュ均衡**として理解できます。

1. **格闘ゲームは非対称報酬のじゃんけん**
   - 行動によってダメージ（報酬）が異なる
   - そのため、最適な行動比率も均等ではない

2. **ナッシュ均衡は「読まれても損しない」状態**
   - 均衡比率で混ぜれば、相手がどんな行動を選んでも期待値は同じ
   - どんなに読みが鋭い相手との戦いでも損をしない戦略

3. **ダメージ差が最適比率を決める**
   - 高リターンの行動に対しては、相手は対応策を多く選ぶ
   - 高リスクの行動は、自分は少なめに選ぶ

4. **均衡からの逸脱は搾取のチャンス**
   - 相手の癖や傾向を見抜けば、均衡から外れて期待値を上げられる
   - ただし、それは相手にも同じことが言える
    - より高いリターンを求めて最適戦略から外れた行動を狙いに行くと、相手がそこを咎めることができる

---

## 補足: より複雑な状況へ

実際の格闘ゲームでは、2択だけでなく3択以上の状況、ファジー行動（複数の選択肢に対応できる行動）、リスクとリターンの非線形性など、より複雑な要素が絡み合います。

しかし、基本的な考え方は同じです。

「Nomari 計算機」ではこのような状況を定義することで、各状況におけるナッシュ均衡の戦略を計算することができます

---

[← 目次に戻る](./index.md)
